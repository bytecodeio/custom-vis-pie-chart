(()=>{function e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}var n={create:function(e,n){},updateAsync:function(n,t,a,r,i,o){t.innerHTML="",t.innerHTML="\n      <style>\n       @import url(https://fonts.googleapis.com/css?family=Open+Sans);\n\n         body{\n          font-family: 'Open Sans',serif;\n          font-weight:bold\n         }\n        #chartdiv {\n          height:100%;\n          min-height: 600px;\n          max-height:660px;\n          width: 100%;\n\n        }\n\n      </style>\n    ";var s=document.createElement("div");s.setAttribute("id","chartdiv"),t.append(s);var l=1===r.fields.dimensions.length,d=1===r.fields.measures.length;l&&d||(t.innerHTML="<p style='text-align:center;font-size:1.25em;padding-top:2em;font-family: 'Open Sans',serif;'>Incompatible Data. This chart requires <em>one dimension</em> and <em>one measure</em>.<br>For example, name and count.</p>"),formattedData=[];var m=r.fields.dimensions[0].name,c=r.fields.measures[0].name;console.log(m),console.log(c),n.forEach((function(e){formattedData.push({name:e[m],count:e[c]})})),am4core.ready((function(){am4core.useTheme(am4themes_animated);var n=am4core.create("chartdiv",am4plugins_sunburst.Sunburst);n.padding(0,0,0,0),n.radius=am4core.percent(98);var t={};formattedData.forEach((function(n){var a;t.hasOwnProperty(n.name)?t[n.name]=[].concat(function(n){if(Array.isArray(n))return e(n)}(a=t[n.name])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(n,t){if(n){if("string"==typeof n)return e(n,t);var a=Object.prototype.toString.call(n).slice(8,-1);return"Object"===a&&n.constructor&&(a=n.constructor.name),"Map"===a||"Set"===a?Array.from(n):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(n,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n]):t[n.name]=[n]}));var a=Object.keys(t).map((function(e){return{name:e,children:t[e]}}));console.log(a),n.data=a,console.log(n.data),n.colors.step=2,n.fontSize=11,n.innerRadius=am4core.percent(10),n.dataFields.value="count",n.dataFields.name="name",n.dataFields.children="children";var r=new am4plugins_sunburst.SunburstSeries;r.hiddenInLegend=!1,n.seriesTemplates.setKey("0",r),r.labels.template.truncate=!0,r.labels.template.hideOversized=!0,r.labels.template.adapter.add("rotation",(function(e,n){return n.maxWidth=n.dataItem.slice.radius-n.dataItem.slice.innerRadius-10,n.maxHeight=Math.abs(n.dataItem.slice.arc*(n.dataItem.slice.innerRadius+n.dataItem.slice.radius)/2*am4core.math.RADIANS),e}));var i=r.clone();n.seriesTemplates.setKey("1",i),i.fillOpacity=.75,i.hiddenInLegend=!0;var o=r.clone();n.seriesTemplates.setKey("2",o),o.fillOpacity=.5,o.hiddenInLegend=!0,n.legend=new am4charts.Legend})),o()}};looker.plugins.visualizations.add(n)})();